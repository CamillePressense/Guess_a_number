<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Guess a number</title>
    </head>
    <body>
        <p>
        <div id="rules">
        </div>
        <input type = "number" min = "0" max = "50" id="playernumber">
        <br>
        <input type = "button" value = "Valider" id="button" onclick=buttonValidation()>
        </p>

    </body>
    
    <script> 

let numberMin = document.getElementById("playernumber").min
let numberMax = document.getElementById("playernumber").max


//Je demande au Joueur 1 de me founir un nombre entre 0 et 50, via une fenêtre de dialogue.   

let numberToGuessPlayerOne = -1

function askANumberToGuessToPlayerOne(){
    
    while ((numberToGuessPlayerOne < 0) || (numberToGuessPlayerOne > 50))
    {
        numberToGuessPlayerOne = prompt("Joueur 1 : Donne moi un nombre entre 0 et 50"); 
        console.log("Nombre entré :" + numberToGuessPlayerOne)      
    }
    
}

// A la validation par le bouton, la fonction buttonValidation est appelée. Elle récupère le nombre 
// proposé par le joueur 2 ( avec la fonction askAnumber) et le compare au nombre entré par le joueur 1
// (avec la fonction didIwin) puis affiche le résultat (avec la fonction showResult). 

function buttonValidation(){
    askANumber()
    didIWin(givenNumberByPlayerTwo, numberToGuessPlayerOne)
    showResult()   
}

// Je récupère le nombre entré par le joueur 2

let givenNumberByPlayerTwo

function askANumber(){
    givenNumberByPlayerTwo = document.getElementById("playernumber").value;
    console.log("le nombre proposé est:" + givenNumberByPlayerTwo)
    return givenNumberByPlayerTwo;
}

//Je vérifie si le nombre du Joueur 2 est égal au nombre du Joueur 1

let result
function didIWin(givenNumberByPlayerTwo, numberToGuessPlayerOne){
    if (givenNumberByPlayerTwo === numberToGuessPlayerOne){
        result = true
    } else {
        result = false
    }
    console.log("le résultat est:" + result)
    return result
} 

//J'affiche le résultat et le nombre de tentatives

let numberOfTries = 1

function showResult(){
    
    console.log("le résultat dans la fonction est: " + result)
    if (result == true) {
        document.getElementById("rules").innerHTML = "BRAVO, Tu as trouvé! IMPRESSIONANT!"
        return
    } else {
        numberOfTries += 1
        if ((givenNumberByPlayerTwo < numberToGuessPlayerOne) && (givenNumberByPlayerTwo >= numberMin)){
                numberMin = givenNumberByPlayerTwo
            } else if ((givenNumberByPlayerTwo < numberToGuessPlayerOne) && (givenNumberByPlayerTwo < numberMin)){
                alert("Le nombre est supérieur à " + numberMin)
            } else if ((givenNumberByPlayerTwo > numberToGuessPlayerOne) && (givenNumberByPlayerTwo <= numberMax)){
                numberMax = givenNumberByPlayerTwo
            } else {
                alert("Le nombre est inférieur à " + numberMax)
            }
            }
        document.getElementById("rules").innerHTML = 
            "Essaie encore. Devine le nombre mystère entre " + numberMin + " et " + numberMax + "\n" + "Tentative n° " + numberOfTries
        } 

// Je lance le jeu    

function startTheGame(){
    askANumberToGuessToPlayerOne()
    document.getElementById("rules").innerHTML = " Prêt.e à jouer à Guess a number ? Devine le nombre mystère entre " + numberMin + " et " + numberMax
}
// J'appelle la fonction pour lancer le jeu

startTheGame()


/*  Étape 5
Afficher le range (0-50) auquel notre utilisateur à le droit autour du champ. Quelque chose comme 0 < ? < 50.
Si l’utilisateur a gagné nous effacerons tout pour afficher notre message de bravo !
En revanche, tant que l’utilisateur n’a pas trouvé le bon chiffre, on affichera le nombre de tentatives en cours sur la partie.
Ajouter un champ input qui permet à l’utilisateur de rentrer sa proposition de nombre directement dans un champ sur la page avec un bouton valider.
*/

/*Étape 6
Si le nombre proposé par l’utilisateur est plus petit que le nombre à deviner, alors vous changerez le range minimal. Ce ne sera plus 10 mais le dernier nombre proposé. Attention si le nombre proposé est en dessous du range minimal, cela ne sert à rien de le changer.
Ex : 12 < ? < 45, si le nombre proposé est 10, on ne change pas le range. Mais on peut afficher une alert pour indiquer que le nombre proposé n’est pas dans le range.
Même chose si le nombre est supérieur.
*/



</script>
</html>

